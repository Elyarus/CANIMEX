"use strict";document.addEventListener("DOMContentLoaded",function(){var t,n,r,a,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,regeneratorRuntime.awrap(fetch("http://localhost:8080/api/animes",t));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("HTTP error! Status: ".concat(n.status));case 7:return e.next=9,regeneratorRuntime.awrap(n.json());case 9:r=e.sent,console.log(r),a=r,u=document.getElementById("bodyTableAnimes"),a.forEach(function(e){var t=document.createElement("tr"),n=document.createElement("td");n.textContent=e.idAnime;var r=document.createElement("td");r.textContent=e.titulo;var a=document.createElement("td");a.textContent=e.genero;var o=document.createElement("td");o.textContent=e.duracion;var c=document.createElement("td"),l=document.createElement("img");l.src="../assets/img/"+e.imagen,l.width=150,l.alt=e.titulo,l.classList.add("img-fluid","img-thumbnail");var i=document.createElement("td"),d=document.createElement("button");d.textContent="Eliminar",d.classList.add("btnEliminar");var s=document.createElement("button");s.textContent="Modificar",s.classList.add("btnModificar"),i.appendChild(d),i.appendChild(s),c.appendChild(l),t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(c),t.appendChild(i),u.appendChild(t)}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error("Error fetching animes:",e.t0);case 19:console.log(document.querySelectorAll(".btnModificar")),document.querySelectorAll(".btnModificar").forEach(function(e){e.addEventListener("click",function(t){var n,r,a,o,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("hizo click"),console.log(t),console.log(t.target),n=t.target.closest("tr"),console.log(n),r=n.querySelector("td:first-child").innerText.trim(),e.prev=6,e.next=9,regeneratorRuntime.awrap(fetch("http://localhost:8080/api/animes?id=".concat(r)));case 9:if((a=e.sent).ok){e.next=12;break}throw new Error("Error al obtener los datos del anime");case 12:return e.next=14,regeneratorRuntime.awrap(a.json());case 14:o=e.sent,c=o[0],console.log(o),document.getElementById("id").value=c.idAnime,document.getElementById("titulo").value=c.titulo,document.getElementById("genero").value=c.genero,document.getElementById("duracion").value=c.duracion,e.next=26;break;case 23:e.prev=23,e.t0=e.catch(6),console.error("Erorr:",e.t0);case 26:case"end":return e.stop()}},null,null,[[6,23]])})}),document.querySelectorAll(".btnEliminar").forEach(function(e){e.addEventListener("click",function(t){var n,r,a,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.closest("tr"),r=n.querySelector("td:first-child").innerText.trim(),e.prev=2,e.next=5,regeneratorRuntime.awrap(fetch("http://localhost:8080/api/animes?id=".concat(r),{method:"DELETE",headers:{"Content-Type":"application/json"}}));case 5:if((a=e.sent).ok){e.next=9;break}throw alert("Error al eliminar el anime"),new Error("Error al eliminar el anime");case 9:return e.next=11,regeneratorRuntime.awrap(a.json());case 11:o=e.sent,alert("Anime eliminado correctamente"),console.log(o),location.reload(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.error("Error:",e.t0);case 20:case"end":return e.stop()}},null,null,[[2,17]])})});case 22:case"end":return e.stop()}},null,null,[[1,16]])});
//# sourceMappingURL=get_modificar_delete_animes.min.js.map
