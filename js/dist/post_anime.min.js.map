{"version":3,"sources":["post_anime.js"],"names":["document","addEventListener","regeneratorRuntime","async","_context2","prev","next","formNuevoAnime","getElementById","event","formData","titulo","genero","duracion","imagen","imageName","options","response","_context","preventDefault","get","alert","abrupt","name","Content-Type","body","JSON","stringify","awrap","fetch","sent","json","headers","reset","stop"],"mappings":"aACAA,SAASC,iBAAiB,mBAAoB,WAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAAC,eAAAP,SAAAQ,eAAA,kBAE1CD,eAAAN,iBAAA,SAAA,SAAAQ,GAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAf,mBAAAC,MAAA,SAAAe,GAAA,OAAA,OAAAA,EAAAb,KAAAa,EAAAZ,MAAA,KAAA,EAAA,GAEAG,EAAAU,iBAEAZ,EAAc,IAAGP,SAASQ,gBAE1BD,EAAAA,EAAeN,IAAAA,UAA2BW,EAAAF,EAAAU,IAAA,UAAAP,EAAAH,EAAAU,IAAA,YAAAN,EAAAJ,EAAAU,IAAA,UAAA,KAAAT,GAAA,KAAAC,GAAA,KAAAC,GAAA,KAAAC,EAN1C,OAOIO,MAAA,qCAPJH,EAAAI,OAAA,UAAAJ,EAAAZ,KAAA,EAAA,MAAA,KAAA,EAAA,OAsBUS,EAAYD,EAAOS,KATnBX,EAAAA,CACAC,OAAAA,OACAC,QAAAA,CAYEU,eAAgB,oBArBcC,KAAAC,KAAAC,UAAA,CAAAhB,OAAAA,EAAAC,OAAAA,EA0B9BC,SAAUA,EAddQ,OAAAA,KAlBRH,EAAAZ,KAAA,GAAAJ,mBAAA0B,MAqBIC,MAAA,mCAAAb,IArBJ,KAAA,GAAA,OAqBIC,EArBJC,EAAAY,KAAAZ,EAAAZ,KAAA,GAAAJ,mBAAA0B,MAuCuBX,EAASc,QAvChC,KAAA,GAAAb,EAAAY,KA0BiB,MAATE,EAAAA,QACIX,MAAA,gCADKd,eAFG0B,QAMRtB,SAAAA,UAEAE,MAAAA,6BAhCZ,KAAA,GAAA,IAAA,MAAA,OAAAK,EAAAgB,YAF0C,KAAA,EAAA,IAAA,MAAA,OAAA9B,EAAA8B","file":"post_anime.min.js","sourcesContent":["// cuando el dom se cargue\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n    // tengo que levantar los datos del formulario, validar los inputs, en caso de algun value vacio, mostrar un mensaje de error\r\n    // y no hacer la peticion fetch\r\n    // si los datos son correctos, realizo la peticion fetch post a la api para agregar una pelicula\r\n    // si la respuesta es correcta, muestro un mensaje de exito y limpio los inputs del formulario\r\n    //obtengo el formulario\r\n    formNuevoAnime = document.getElementById('formNuevoAnime');\r\n    //agrego el evento submit al formulario\r\n    formNuevoAnime.addEventListener('submit', async (event) => {\r\n        //prevengo el comportamiento por defecto del formulario\r\n        event.preventDefault();\r\n        //obtengo los datos del formulario\r\n        const formData = new FormData(formNuevoAnime);\r\n        //obtengo los valores de los inputs\r\n        const titulo = formData.get('titulo');\r\n        const genero = formData.get('genero');\r\n        const duracion = formData.get('duracion');\r\n        const imagen = formData.get('imagen');\r\n        //valido los inputs\r\n        if (titulo === '' || genero === '' || duracion === '' || imagen === '') {\r\n            alert('Todos los campos son obligatorios');\r\n            return;\r\n        }\r\n        // levanto solo el nombre del file para enviarlo a la api\r\n        const imageName = imagen.name;\r\n        //configuracion de options, es un post y necesita body\r\n        const options = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                titulo: titulo,\r\n                genero: genero,\r\n                duracion: duracion,\r\n                imagen: imageName\r\n            })\r\n        };\r\n        //realizo la peticion fetch a la api para agregar una pelicula\r\n        const response = await fetch('http://localhost:8080/api/animes', options);\r\n        //obtengo la respuesta\r\n        const data = await response.json();\r\n        //si la respuesta es correcta, muestro un mensaje de exito y limpio los inputs del formulario\r\n        // si el codigo es 201, la pelicula se agrego correctamente\r\n        if (response.status === 201) {\r\n            alert('Anime agregada correctamente');\r\n            formNuevoAnime.reset();\r\n            // que se recargue la pagina para ver la pelicula agregada\r\n            location.reload();\r\n        } else {\r\n            alert('Error al agregar el anime');\r\n        }\r\n    });\r\n\r\n});"]}