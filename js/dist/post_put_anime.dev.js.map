{"version":3,"sources":["post_put_anime.js"],"names":["document","addEventListener","formNuevoAnime","getElementById","event","preventDefault","idAnime","value","titulo","genero","duracion","imagen","files","getAttribute","alert","url","method","animeData","name","options","headers","body","JSON","stringify","fetch","response","ok","Error","json","responseData","status","reset","location","reload","console","error"],"mappings":"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","sourcesContent":["// cuando el dom se cargue\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n    const formNuevoAnime = document.getElementById('formNuevoAnime');\r\n    //agrego el evento submit al formulario\r\n    formNuevoAnime.addEventListener('submit', async (event) => {\r\n        //prevengo el comportamiento por defecto del formulario\r\n        event.preventDefault();\r\n        //obtengo los datos del formulario\r\n        // const formData = new FormData(formNuevoAnime);\r\n        //obtengo los valores de los inputs\r\n        const idAnime = document.getElementById('id').value;\r\n        const titulo = document.getElementById('titulo').value;\r\n        const genero = document.getElementById('genero').value;\r\n        const duracion = document.getElementById('duracion').value;\r\n        const imagen = document.getElementById('imagen').files[0] || document.getElementById('imagen').getAttribute('data-current-image');\r\n        ;\r\n        //valido los inputs\r\n        if (titulo === '' || genero === '' || duracion === '' || imagen === '') {\r\n            alert('Todos los campos son obligatorios');\r\n            return;\r\n        }\r\n        let url = 'http://localhost:8080/api/animes';\r\n        let method = 'POST';\r\n\r\n        // construir el objeto con los datos del anime\r\n        const animeData = {\r\n            titulo: titulo,\r\n            genero: genero,\r\n            duracion: duracion,\r\n            imagen: imagen.name \r\n        };\r\n             // Si hay un ID de película (es una modificación), incluirlo en el objeto movieData\r\n            if (idAnime) {\r\n                animeData.idAnime = idAnime;\r\n                method = 'PUT';\r\n            }\r\n        // levanto solo el nombre del file para enviarlo a la api\r\n        // const imageName = imagen.name;\r\n        //configuracion de options, es un post y necesita body\r\n        const options = {\r\n            method: method,\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(animeData)\r\n        };\r\n        //realizo la peticion fetch a la api para agregar una pelicula\r\n        try {\r\n            const response = await fetch(url, options);\r\n            if (!response.ok) {\r\n                throw new Error('Error al guardar el anime');\r\n            }\r\n\r\n            const responseData = await response.json();\r\n\r\n            if (method === 'POST') {\r\n                // si el codigo es 201 la pelicula se creo correctamente\r\n                if (response.status !== 201) {\r\n                    alert('Error al guardar el anime');\r\n                    throw new Error('Error al guardar el anime');\r\n                }\r\n                alert('Anime agregado correctamente')\r\n            } else {\r\n                // si el codigo es 200, el anime se modifico correctamente\r\n                if (response.status !== 200) {\r\n                    alert('Error al modificar el anime');\r\n                    throw new Error('Error al modificar el anime');\r\n                }\r\n                alert('Anime modificado correctamente');\r\n            }\r\n\r\n            formNuevoAnime.reset();\r\n            location.reload(); //recargar la pagina para mostrar los cambios\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            alert('Error al guardar el anime');\r\n        }\r\n    });\r\n\r\n});"],"file":"post_put_anime.dev.js"}