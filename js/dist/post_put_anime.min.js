"use strict";document.addEventListener("DOMContentLoaded",function(){var m;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:(m=document.getElementById("formNuevoAnime")).addEventListener("submit",function(r){var t,a,n,o,i,c,s,l,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t=document.getElementById("id").value,a=document.getElementById("titulo").value,n=document.getElementById("genero").value,o=document.getElementById("duracion").value,i=document.getElementById("imagen").files[0]||document.getElementById("imagen").getAttribute("data-current-image"),""===a||""===n||""===o||""===i)return alert("Todos los campos son obligatorios"),e.abrupt("return");e.next=10;break;case 10:return"http://localhost:8080/api/animes",c="POST",s={titulo:a,genero:n,duracion:o,imagen:i.name},t&&(s.idAnime=t,c="PUT"),l={method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},e.prev=15,e.next=18,regeneratorRuntime.awrap(fetch("http://localhost:8080/api/animes",l));case 18:if((u=e.sent).ok){e.next=21;break}throw new Error("Error al guardar el anime");case 21:return e.next=23,regeneratorRuntime.awrap(u.json());case 23:if(e.sent,"POST"!==c){e.next=31;break}if(201!==u.status)throw alert("Error al guardar el anime"),new Error("Error al guardar el anime");e.next=28;break;case 28:alert("Anime agregado correctamente"),e.next=35;break;case 31:if(200!==u.status)throw alert("Error al modificar el anime"),new Error("Error al modificar el anime");e.next=34;break;case 34:alert("Anime modificado correctamente");case 35:m.reset(),location.reload(),e.next=43;break;case 39:e.prev=39,e.t0=e.catch(15),console.error("Error:",e.t0),alert("Error al guardar el anime");case 43:case"end":return e.stop()}},null,null,[[15,39]])});case 2:case"end":return e.stop()}})});
//# sourceMappingURL=post_put_anime.min.js.map
